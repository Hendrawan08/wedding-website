<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Undangan Pernikahan ‚Äî Hendrawan & Rona</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

  <link rel="stylesheet" href="style.css">

  <meta name="theme-color" content="#5a3d2e" />
</head>
<body>

  <script>
    window.__WEDDING = {
      groom: "Hendrawan Lotanto",
      bride: "Rona Winarsih",
      dateISO: "2026-01-11T08:00:00", // waktu acara (ubah jam jika perlu)
      venueName: "Masjid Raya Sheikh Zayed Solo Surakarta",
      venueCoords: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3955.185965609997!2d110.82419937506135!3d-7.554691392459049!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e7a17dac308ebbf%3A0xa8c652329428591d!2sMasjid%20Raya%20Sheikh%20Zayed%20Solo%20Surakarta!5e0!3m2!1sid!2sid!4v1762839487639!5m2!1sid!2sid", // lat,lng OR full Google Maps URL
      bank: {
        name: "BCA",
        account: "1234567890",
        an: "Hendrawan Lotanto",
        qr: "assets/images/qr.png"
      }
    };
  </script>

  <header id="hero" class="section-hero" data-aos="fade-up">
    <div class="hero-inner container">
      <div class="hero-text">
        <p class="small-label">Dengan memohon rahmat dan ridha Allah SWT</p>
        <h1 id="hero-names" class="names">Hendrawan Lotanto & Rona Winarsih</h1>
        <p id="hero-date" class="date">11 Januari 2026</p>
        <p class="cta-note">Kami mengundang Anda untuk hadir dan mendoakan kebahagiaan kami.</p>

        <div class="hero-actions">
          <a class="btn-primary" href="#countdown">Hitung Mundur</a>
          <a class="btn-ghost" href="#gallery">Galeri</a>
          <a class="btn-ghost" href="#donate">Amplop Digital</a>
        </div>
      </div>

      <div class="hero-photo" aria-hidden="true"></div>
    </div>
  </header>

  <section id="greeting" class="section" data-aos="fade-up">
    <div class="container narrow centered">
      <p id="greeting-text" class="greeting-text">Halo, selamat datang ‚Äî masukkan nama dulu di halaman awal.</p>
      <p class="lead">Dengan penuh syukur kami menanti doa dan kehadiran Anda.</p>
    </div>
  </section>

  <section id="countdown" class="section" data-aos="fade-up">
    <div class="container centered">
      <h2 class="section-title">Hitung Mundur Menuju Hari Bahagia</h2>
      <div id="countdown-display" class="timer" aria-live="polite">-- hari -- jam -- menit -- detik</div>
    </div>
  </section>

  <section id="about" class="section" data-aos="fade-up">
    <div class="container narrow">
      <h2 class="section-title">Tentang Kami & Konsep Pernikahan</h2>
      <p>
        Assalamu‚Äôalaikum Warahmatullahi Wabarakatuh. Kami, <strong>Hendrawan Lotanto</strong> dan <strong>Rona Winarsih</strong>,
        mengundang Bapak/Ibu/Saudara/i untuk hadir dalam rangka penyatuan kami dalam ikatan pernikahan yang kami jalankan dengan konsep <strong>islami</strong> ‚Äî
        sederhana namun penuh keberkahan, mengutamakan doa, silaturahmi keluarga, dan niat yang tulus.
      </p>

      <blockquote class="quote">
        <p><em>‚ÄúDan di antara tanda-tanda (kebesaran)-Nya ialah Dia menciptakan untukmu pasangan-pasangan dari jenismu sendiri,
        supaya kamu merasa tenteram kepadanya, dan dijadikan-Nya di antaramu rasa kasih dan sayang.‚Äù</em></p>
        <footer><p class="muted"><strong>QS. Ar-Rum: 21</strong></p></footer>
      </blockquote>

      <p>
        Kami berharap pernikahan ini menjadi awal untuk membangun keluarga yang sakinah, mawaddah, wa rahmah. Mohon doa dan restu.
        <br>
        <em>Hadits:</em> ‚ÄúNikah itu sunnahku, siapa yang tidak menyukai sunnahku, bukan golonganku.‚Äù (ringkasan hadits)
      </p>
    </div>
  </section>

  <section id="gallery" class="section" data-aos="fade-up">
    <div class="container">
      <h2 class="section-title">Galeri Kenangan</h2>
      <p class="muted">Klik foto untuk memperbesar. Deskripsi bergantian kiri-kanan (zig-zag).</p>

      <article class="gallery-item left animate">
        <img src="assets/images/gallery1.jpeg" alt="Awal Pertemuan">
        <div class="desc">
          <h3>Awal Pertemuan</h3>
          <p>Pertemuan sederhana yang menumbuhkan harapan ‚Äî awal dari cerita kita.</p>
        </div>
      </article>

      <article class="gallery-item right animate">
        <div class="desc">
          <h3>Perjalanan Bersama</h3>
          <p>Langkah-langkah kecil yang kita jalani bersama, saling menguatkan dan berbagi doa.</p>
        </div>
        <img src="assets/images/gallery2.jpeg" alt="Perjalanan Bersama">
      </article>

      <article class="gallery-item left animate">
        <img src="assets/images/gallery3.jpeg" alt="Momen Lamaran">
        <div class="desc">
          <h3>Lamaran</h3>
          <p>Momen hangat saat keluarga berkumpul, restu dipinta, dan harapan disematkan.</p>
        </div>
      </article>

      <article class="gallery-item right animate">
        <div class="desc">
          <h3>Senja Bersama</h3>
          <p>Waktu sederhana yang tak terlupakan, menjadi warna dalam hari-hari kita.</p>
        </div>
        <img src="assets/images/gallery4.jpeg" alt="Senja Bersama">
      </article>

      <article class="gallery-item left animate">
        <img src="assets/images/gallery5.jpeg" alt="Doa Keluarga">
        <div class="desc">
          <h3>Doa Keluarga</h3>
          <p>Doa adalah hadiah terbaik ‚Äî semoga kami selalu dalam lindungan-Nya.</p>
        </div>
      </article>

      <article class="gallery-item right animate">
        <div class="desc">
          <h3>Menuju Hari Bahagia</h3>
          <p>Kami bersiap menyambut hari spesial dengan hati yang penuh syukur.</p>
        </div>
        <img src="assets/images/gallery6.jpeg" alt="Menuju Hari Bahagia">
      </article>

    </div>
  </section>

  <section id="events" class="section" data-aos="fade-up">
    <div class="container narrow centered">
      <h2 class="section-title">Detail Acara</h2>
      <p class="lead">Kami mengharapkan kehadiran Anda di kedua prosesi suci kami.</p>

      <div class="event-wrapper">
        <div class="event-card" data-aos="fade-up" data-aos-delay="100">
          <div class="event-icon">A</div>
          <h3>Akad Nikah</h3>
          <p>
            <strong>Minggu, 11 Januari 2026</strong><br>
            Pukul 09:00 WIB - Selesai
          </p>
          <p class="event-venue" id="venueNameAkad">
            Masjid Istiqlal, Jakarta Pusat
          </p>
          <a href="#" class="btn-ghost small" id="open-maps-akad" target="_blank" rel="noopener">Lihat Peta Akad</a>
        </div>

        <div class="event-card" data-aos="fade-up" data-aos-delay="250">
          <div class="event-icon">R</div>
          <h3>Resepsi</h3>
          <p>
            <strong>Minggu, 11 Januari 2026</strong><br>
            Pukul 12:00 WIB - 15:00 WIB
          </p>
          <p class="event-venue" id="venueNameResepsi">
            Gedung Serbaguna Melati
          </p>
          <a href="#" class="btn-ghost small" id="open-maps-resepsi" target="_blank" rel="noopener">Lihat Peta Resepsi</a>
        </div>
      </div>
    </div>
  </section>

<section id="guestbook" class="section" data-aos="fade-up">
    <div class="container narrow">
      <h2 class="section-title">Buku Tamu & Ucapan Doa</h2>
      <p class="muted">Kirimkan doa dan ucapan terbaik Anda untuk kami.</p>

      <form id="guestbook-form" class="guestbook-form" data-aos="fade-up">
        <div class="form-group">
          <label for="guestName">Nama Anda</label>
          <input type="text" id="guestName" name="guestName" required placeholder="Tulis nama Anda...">
        </div>
        <div class="form-group">
          <label for="guestMessage">Ucapan Anda</label>
          <textarea id="guestMessage" name="guestMessage" rows="4" required placeholder="Tulis doa dan ucapan..."></textarea>
        </div>
        <button type="submit" class="btn-primary">Kirim Ucapan</button>
      </form>

      <div class="comments-list" data-aos="fade-up" data-aos-delay="150">
        <h3 class="comments-title">Ucapan Terdahulu</h3>
        
        <div class="comment-item">
          <strong class="comment-name">Budi & Keluarga</strong>
          <p class="comment-body">
            MasyaAllah, selamat ya Hendrawan & Rona! Semoga menjadi keluarga yang sakinah, mawaddah, wa rahmah. Lancar sampai hari H!
          </p>
          <span class="comment-date">2 hari yang lalu</span>
        </div>
        
        <div class="comment-item">
          <strong class="comment-name">Rekan Kerja</strong>
          <p class="comment-body">
            Selamat, Bos! Akhirnya pecah telur juga. Semoga samawa!
          </p>
          <span class="comment-date">1 hari yang lalu</span>
        </div>
        
        </div>
    </div>
  </section>

  <section id="maps" class="section" data-aos="fade-up">
    <div class="container narrow">
      <h2 class="section-title">Lokasi Acara</h2>
      <p class="muted" id="venueName">Gedung Serbaguna Melati</p>

      <div class="map-wrap">
        <iframe id="gmaps" src="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>

      <div>
        <a id="open-maps" class="btn-ghost" target="_blank" rel="noopener">Buka di Google Maps</a>
      </div>
    </div>
  </section>

  <section id="donate" class="section" data-aos="fade-up">
    <div class="container centered">
      <h2 class="section-title">Amplop Digital</h2>
      <p class="muted">Bagi yang ingin memberi doa dalam bentuk amplop digital ‚Äî terima kasih atas kebaikannya.</p>

      <div class="donation-card">
        <div class="donation-info">
          <p class="bank-name" id="bankName">BCA</p>
          <p class="account"><strong id="bankAccount">1234567890</strong><br> a.n <strong id="bankAn">Hendrawan Lotanto</strong></p>
          
          <div>
            <button class="btn-primary" id="btn-copy-rek">Salin Nomor</button>
            <button class="btn-ghost" id="toggle-qr">Tampilkan QR</button>
          </div>
        </div>

        <div>
          <img id="bank-qr" class="qr-img" src="assets/images/qr.png" alt="QR Payment">
        </div>
      </div>
    </div>
  </section>

  <footer class="site-footer" data-aos="fade-up">
    <div class="container centered">
      <p>Terima kasih atas doa & restu. Sampai jumpa di hari bahagia kami üíñ</p>
      <p class="muted small">Hendrawan Lotanto & Rona Winarsih ‚Äî 2026</p>
    </div>
  </footer>

  <div id="lightbox" class="lightbox" aria-hidden="true" role="dialog">
    <button id="lb-close" class="lb-close" aria-label="Tutup">√ó</button>
    <img id="lb-img" src="" alt="Foto besar" />
  </div>

  <audio id="bg-music" src="assets/audio/lagu.mp3" loop playsinline></audio>
  <button id="music-fallback" class="music-fallback" style="display:none;">‚ñ∂Ô∏è Putar Musik</button>

  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="script.js" defer></script>

  <script>
    // PERUBAHAN: Skrip dibungkus dalam IIFE (Immediately Invoked Function Expression)
    (function(){
      
      // PERUBAHAN: Fungsi helper dipindah ke dalam IIFE agar tidak global
      function escapeHtml(s){ return String(s).replace(/[&<>"']/g, (m)=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[m]); }

      const W = window.__WEDDING || {};
      const heroNames = document.getElementById('hero-names');
      const heroDate = document.getElementById('hero-date');
      const venueName = document.getElementById('venueName');
      const bankName = document.getElementById('bankName');
      const bankAccount = document.getElementById('bankAccount');
      const bankAn = document.getElementById('bankAn');
      const bankQr = document.getElementById('bank-qr');
      const gmaps = document.getElementById('gmaps');
      const openMaps = document.getElementById('open-maps');
      const greetEl = document.getElementById('greeting-text');

      // populate hero names & date display from config
      if (heroNames && W.groom && W.bride) {
        heroNames.textContent = `${W.groom} & ${W.bride}`;
      }
      
      // date formatting: show human readable date
      if (heroDate && W.dateISO) {
        try {
          const d = new Date(W.dateISO);
          if (!isNaN(d)) {
            const opt = { weekday: 'long', year:'numeric', month:'long', day:'numeric' };
            heroDate.textContent = d.toLocaleDateString('id-ID', opt);
          }
        } catch(e){ console.error('Error formatting date:', e); }
      }
      
      // set venue name
      if (venueName && W.venueName) venueName.textContent = W.venueName;
      
      // set bank info
      if (W.bank) {
        if (bankName) bankName.textContent = W.bank.name || 'Bank';
        if (bankAccount) bankAccount.textContent = W.bank.account || '';
        if (bankAn) bankAn.textContent = W.bank.an || '';
        if (bankQr && W.bank.qr) bankQr.src = W.bank.qr;
      }
      
      // prepare maps iframe src & open-maps href
      const coords = W.venueCoords || '';
      // --- GUNAKAN KODE BARU INI ---
    if (gmaps && openMaps && coords) {
    if (coords.startsWith('http')) {
        // Ini adalah URL lengkap (baik itu link "Share" atau "Embed")
        // Kita asumsikan pengguna sudah memasukkan URL embed yang benar
        gmaps.src = coords; 

        // Untuk tombol "Buka di Maps", kita butuh link non-embed.
        // Jika pengguna memasukkan link embed, kita coba "tebak" link share-nya.
        if (coords.includes('/embed')) {
            try {
                // Coba ekstrak parameter 'q' dari URL embed
                const urlObj = new URL(coords);
                const q = urlObj.searchParams.get('q');
                if (q) {
                    openMaps.href = `http://googleusercontent.com/maps?q=${encodeURIComponent(q)}`;
                } else {
                    openMaps.href = 'http://googleusercontent.com/maps'; // Fallback
                }
            } catch(e) {
                openMaps.href = coords; // Fallback jika URL tidak valid
            }
        } else {
            // Ini sudah link share, gunakan apa adanya
            openMaps.href = coords;
        }

  } else {
    // Ini adalah koordinat (lat,lng), gunakan logika lama yang sudah diperbaiki
    const encodedCoords = encodeURIComponent(coords);
    gmaps.src = `http://googleusercontent.com/maps/google.com/3{encodedCoords}&t=m&z=16&output=embed&iwloc=near`;
    openMaps.href = `http://googleusercontent.com/maps/google.com/3{encodedCoords}`;
  }
}

      // greeting name from localStorage
      const guest = localStorage.getItem('namaTamu') || '';
      if (guest && greetEl) {
        // PERUBAHAN: Memanggil fungsi escapeHtml yang sudah dipindah
        greetEl.innerHTML = `Halo <strong>${escapeHtml(guest)}</strong>, terima kasih atas kunjungan Anda.`;
      }

      // init AOS (external lib)
      if (window.AOS) {
        AOS.init({ duration: 900, once: true, offset: 120 });
      }
    })();
  </script>

</body>
</html>